<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Java-wns by fernandospr</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Java-wns</h1>
        <h2>Java Service Provider to send push notifications to Windows 8 devices through WNS</h2>
        <a href="https://github.com/fernandospr/java-wns" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h2>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p><strong>java-wns</strong> is a Java client for <a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh913756.aspx">Windows Push Notification service (WNS)</a>.</p>

<p>This library will let you implement the Cloud Service of the diagram below:</p>

<p><img src="http://i.msdn.microsoft.com/dynimg/IC554245.png"></p>

<h2>
<a name="updates" class="anchor" href="#updates"><span class="octicon octicon-link"></span></a>Updates</h2>

<p>Version 1.2 is released!</p>

<p><strong>1.2 Changes</strong> </p>

<ul>
<li>Send raw notifications</li>
</ul><p><strong>1.1 Changes</strong> </p>

<ul>
<li>Send a notification to multiple channelUris</li>
</ul><h2>
<a name="steps" class="anchor" href="#steps"><span class="octicon octicon-link"></span></a>Steps</h2>

<ul>
<li><p><a href="#first-step---registration">First</a>, you will need to register your Windows application in the store to get a SID (Package security identifier) and Client Secret codes.</p></li>
<li><p><a href="#second-step---obtain-channel-uri">Second</a>, obtain the Channel URI of your devices.</p></li>
<li><p><a href="#third-step---send-notifications">Third</a>, use this library to authenticate with WNS and send the notifications!</p></li>
</ul><h3>
<a name="first-step---registration" class="anchor" href="#first-step---registration"><span class="octicon octicon-link"></span></a>First step - Registration</h3>

<p>Go to the <a href="http://go.microsoft.com/fwlink/p/?linkid=234306">Windows Store app development page</a> of the Windows Dev Center and sign in with your Microsoft account.</p>

<p>Once you have signed in, select the Dashboard tab.</p>

<p>On the Dashboard, submit your Windows app and update your package.appxmanifest with the corresponding identity values.</p>

<p>If you want your devices to receive Toast notifications, you should also change "Toast capable" to YES in the manifest configuration.</p>

<p>Go to Services&gt;Push notifications and Live Connect services info and below "If your app uses WNS for push notifications, review", select Authenticating your service.</p>

<p>Save the SID (Package security identifier) and Client Secret, example screenshot below:
<img src="http://i.msdn.microsoft.com/dynimg/IC582761.png"></p>

<h3>
<a name="second-step---obtain-channel-uri" class="anchor" href="#second-step---obtain-channel-uri"><span class="octicon octicon-link"></span></a>Second step - Obtain Channel URI</h3>

<p>Add the following code to your Windows app:</p>

<p>Javascript</p>

<pre><code>var channel;
var pushNotifications = Windows.Networking.PushNotifications;
var channelOperation = pushNotifications.PushNotificationChannelManager.createPushNotificationChannelForApplicationAsync();

return channelOperation.then(function (newChannel) {
    channel = newChannel;
    // Success. The channel URI is found in newChannel.uri.
    },
    function (error) {
        // Could not create a channel. Retrieve the error through error.number.
    }
);
</code></pre>

<p>C#</p>

<pre><code>PushNotificationChannel channel = null;

try
{
    channel = await PushNotificationChannelManager.CreatePushNotificationChannelForApplicationAsync();
    // Success. The channel URI is found in channel.Uri.
}

catch (Exception ex)
{ 
    // Could not create a channel. 
}
</code></pre>

<h3>
<a name="third-step---send-notifications" class="anchor" href="#third-step---send-notifications"><span class="octicon octicon-link"></span></a>Third step - Send notifications</h3>

<p>Now with your SID, Client Secret and Channel URI you are ready to send!</p>

<p><a href="https://github.com/fernandospr/java-wns/wiki/Installation">Install this library</a> and write the following to start the service:</p>

<pre><code>boolean logging = true;
String sid = "yourSID";
String clientSecret = "yourClientSecret";
WnsService service = new WnsService(sid, clientSecret, logging);
</code></pre>

<p>Write the following to send a Badge notification:</p>

<pre><code>String channelUri = "yourChannelUri";
WnsBadge badge =  new WnsBadgeBuilder().value(1).build();
service.pushBadge(channelUri, badge);
</code></pre>

<p>Write the following to send a Tile notification:</p>

<pre><code>String channelUri = "yourChannelUri";
WnsTile tile =  new WnsTileBuilder.bindingTemplateTileWideText03("Hello world").build();
service.pushTile(channelUri, tile);
</code></pre>

<p>Write the following to send a Toast notification:</p>

<pre><code>String channelUri = "yourChannelUri";
WnsToast toast =  new WnsToastBuilder.bindingTemplateToastText01("Hello world").build();
service.pushToast(channelUri, toast);
</code></pre>

<p>Write the following to send a Raw notification:</p>

<pre><code>String channelUri = "yourChannelUri";
WnsRaw raw =  new WnsRawBuilder.stream("Hello world".getBytes()).build();
service.pushRaw(channelUri, raw);
</code></pre>

<h2>
<a name="notification-builders" class="anchor" href="#notification-builders"><span class="octicon octicon-link"></span></a>Notification builders</h2>

<p>To create and customize notifications, you should use the following builders:</p>

<ul>
<li>WnsBadgeBuilder</li>
<li>WnsToastBuilder</li>
<li>WnsTileBuilder</li>
<li>WnsRawBuilder</li>
</ul><p>WnsToastBuilder and WnsTileBuilder have methods with the following signature:</p>

<pre><code>bindingTemplateXXX()
</code></pre>

<p>Please check the Toast and Tile templates in the <a href="#links">Links section</a> to use the one you need.</p>

<h2>
<a name="response-headers" class="anchor" href="#response-headers"><span class="octicon octicon-link"></span></a>Response headers</h2>

<p>The pushXXX methods of WnsService return an object of the WnsNotificationResponse type. 
This object contains the values specified in the Headers (Send notification response section) in the <a href="#links">Links section</a>.</p>

<h2>
<a name="request-optional-headers" class="anchor" href="#request-optional-headers"><span class="octicon octicon-link"></span></a>Request optional headers</h2>

<p>There are pushXXX methods implementations that receive an object of the WnsNotificationRequestOptional type.
You should create an object of this type and set the corresponding values, according to the Headers (Request parameters) in the <a href="#links">Links Section</a>.</p>

<h2>
<a name="links" class="anchor" href="#links"><span class="octicon octicon-link"></span></a>Links</h2>

<p>This library was built based on the following Microsoft documentation:</p>

<p><a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh913756.aspx">Overview</a></p>

<p><a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh465460.aspx">Sending push notifications</a></p>

<p><a href="http://msdn.microsoft.com/en-us/library/windows/apps/br212853.aspx">Schemas</a></p>

<p><a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh761494.aspx">Toast templates</a></p>

<p><a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh761492.aspx">Toast audio options</a></p>

<p><a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx">Tile templates</a></p>

<p><a href="http://msdn.microsoft.com/en-us/library/windows/apps/jj676791.aspx">Raw notification overview</a></p>

<p><a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh465435.aspx">Headers</a></p>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Licensed under the <a href="http://www.opensource.org/licenses/BSD-3-Clause">New 3-Clause BSD License</a>.</p>

<pre><code>Copyright 2013, Fernando Sproviero.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

  * Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.
  * Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the following disclaimer
    in the documentation and/or other materials provided with the
    distribution.
  * Neither the name of Fernando Sproviero nor the names of its
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</code></pre>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/fernandospr/java-wns/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/fernandospr/java-wns/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/fernandospr/java-wns"></a> is maintained by <a href="https://github.com/fernandospr">fernandospr</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-43057045-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>